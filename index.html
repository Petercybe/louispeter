<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login & Signup System</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
            background-image:url(data:image/jpeg;base64,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);
            background-repeat:no-repeat;
            background-size: cover;
            background-position:absolute;

        }
        
        .auth-container {
            width: 20em;
            height: 30em;
            max-width: 400px; 
            padding: 30px;
            border: solid 2px white;
            border-radius: 15px;
            transform-style:preserve-3d;
            transition: transform 0.9s ease-in-out;
            perspective: 800px;
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(8px);
        }
      
      .auth-container:hover {
        transform: scale(0.98);
        width: auto;
        border-radius: 30px;
        box-shadow: inset 2px 5px 10px rgb(29, 29, 29);
      }
      .card {
        background-image:linear-gradient(163deg, #f1f8f5 0%, #0f0f0f 100%);;
        border-radius: 22px;
        transition: all 0.3s;
      }
      .card:hover {
        box-shadow: 10px 10px 15px rgba(241, 239, 239, 0.705),-10px -10px 15px rgba(10, 10, 10, 0.774);
       
      }
        
        h2 {
            text-align: center;
            margin-bottom: 25px;
            color: #181717;
            box-sizing: border-box;
            position: relative;
            border: 2%;
            
        }
         .profile-image {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            box-shadow: 0 0 5px rgb(123, 151, 151), 0 0 25px rgb(19, 48, 48);
            margin: 20px auto;
            background-color: #ddd;
            overflow: hidden;
            transform-style: preserve-3d;
            
        }

        .profile-image img {
            width: 100%;
            position: absolute;
           top: -50px;
            height: auto;
            display: flex;
            object-fit: cover;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #e9dfdf;
        }
        
        input {
            width: 100%;
            padding: 15px;
            background: #e0e5ec;
            border: none;
            outline: none;
            border-radius: 25px;
            padding: 0.6em;
            color: rgb(241, 235, 235);
            background-color: #201e1e;
           box-shadow: inset 2px 5px 10px rgb(29, 29, 29);
            box-sizing: border-box;
            font-size: 16px;
            display: flex;
          align-items: center;
          justify-content: center;
         gap: 0.5em;
        }
        
        input:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.3);
        }
        
        .btn {
            background-color: #47494d;
            color: white;
            border: none;
            padding: 12px 20px;
            position:relative;
            left: 20%;
            width: 60%;
            border-radius: 9px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        
        
        .btn:hover {
            background-color: #1c3047;
        }
        
        .error-message {
            color: #dc3545;
            margin-top: 10px;
            font-size: 14px;
            display: none;
        }
        
        .success-message {
            color: #28a745;
            margin-top: 10px;
            font-size: 14px;
            display: none;
        }
        
        .toggle-auth {
            text-align: center;
            margin-top: 15px;
        }
        
        .toggle-auth a {
            color: #007bff;
            text-decoration: none;
            cursor: pointer;
        }
        
        .toggle-auth a:hover {
            text-decoration: underline;
        }
        
        .hidden {
            display: none;
        }
        .info-text {
            border: #ffffff;
            padding: 20px 20px 10px 10px;
            width: 100%;
            height: 10%;
            border-radius: 50px;

        }
    </style>
</head>
<body>
    <div class="card">
    <div class="auth-container">
        <!-- Login Form -->
        <div id="loginFormContainer"> 
            <h2>Login</h2>
            <div class="profile-image">
                <img src="https://files.cdn-files-a.com/uploads/9554711/2000_68175d1d994da.jpg" alt="Profile Picture">
            </div>
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginUsername">Username</label>
                    <input type="text" id="loginUsername" name="username" placeholder="Enter your username" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" name="password" placeholder="Enter your password" required>
                </div>
                <div id="loginErrorMessage" class="error-message"></div>
                <div id="loginSuccessMessage" class="success-message"></div>
                <button type="submit" class="btn">Login</button>
                <div class="toggle-auth">
                    Don't have an account? <a id="showSignup">Sign up</a>
                </div>
            </form>
        </div>

        <!-- Signup Form -->
        <div id="signupFormContainer" class="hidden">
            <h2>Sign Up</h2>
            <form id="signupForm">
                <div class="form-group">
                    <label for="signupUsername">Username</label>
                    <input type="text" id="signupUsername" name="username" placeholder="Choose a username" required>
                </div>
                <div class="form-group">
                    <label for="signupEmail">Email</label>
                    <input type="email" id="signupEmail" name="email" placeholder="Enter your email" required>
                </div>
                <div class="form-group">
                    <label for="signupPassword">Password</label>
                    <input type="password" id="signupPassword" name="password" placeholder="Choose a password" required>
                </div>
                <div class="form-group">
                    <label for="confirmPassword">Confirm Password</label>
                    <input type="password" id="confirmPassword" name="confirmPassword" placeholder="Confirm your password" required>
                </div>
                <div id="signupErrorMessage" class="error-message"></div>
                <div id="signupSuccessMessage" class="success-message"></div>
                <button type="submit" class="btn">Sign Up</button>
                <div class="toggle-auth">
                    Already have an account? <a id="showLogin">Login</a>
                </div>
            </form>
        </div>
    </div>

    <script>
      // DOM Elements
const loginFormContainer = document.getElementById('loginFormContainer');
const signupFormContainer = document.getElementById('signupFormContainer');
const showSignup = document.getElementById('showSignup');
const showLogin = document.getElementById('showLogin');
const loginForm = document.getElementById('loginForm');
const signupForm = document.getElementById('signupForm');

// Toggle between login and signup forms
showSignup.addEventListener('click', () => {
    loginFormContainer.classList.add('hidden');
    signupFormContainer.classList.remove('hidden');
    clearMessages();
});

showLogin.addEventListener('click', () => {
    signupFormContainer.classList.add('hidden');
    loginFormContainer.classList.remove('hidden');
    clearMessages();
});

// Clear all messages
function clearMessages() {
    document.getElementById('loginErrorMessage').style.display = 'none';
    document.getElementById('loginSuccessMessage').style.display = 'none';
    document.getElementById('signupErrorMessage').style.display = 'none';
    document.getElementById('signupSuccessMessage').style.display = 'none';
}

// Signup form submission
signupForm.addEventListener('submit', async function(e) {
    e.preventDefault();
    
    // Get input values
    const username = document.getElementById('signupUsername').value.trim();
    const email = document.getElementById('signupEmail').value.trim();
    const password = document.getElementById('signupPassword').value;
    const confirmPassword = document.getElementById('confirmPassword').value;
    const errorMessage = document.getElementById('signupErrorMessage');
    const successMessage = document.getElementById('signupSuccessMessage');
    
    // Reset messages
    errorMessage.style.display = 'none';
    successMessage.style.display = 'none';
    
    // Validation
    if (!username || !email || !password || !confirmPassword) {
        showError(errorMessage, 'Please fill in all fields');
        return;
    }
    
    if (password !== confirmPassword) {
        showError(errorMessage, 'Passwords do not match');
        return;
    }
    
    if (password.length < 6) {
        showError(errorMessage, 'Password must be at least 6 characters');
        return;
    }
    
    try {
        const response = await fetch('/api/auth/signup', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ username, email, password })
        });
        
        const data = await response.json();
        
        if (!response.ok) {
            throw new Error(data.msg || 'Signup failed');
        }
        
        // Show success message and switch to login form
        successMessage.textContent = 'Signup successful! You can now login.';
        successMessage.style.display = 'block';
        
        // Clear form
        signupForm.reset();
        
        // Switch to login form after 2 seconds
        setTimeout(() => {
            signupFormContainer.classList.add('hidden');
            loginFormContainer.classList.remove('hidden');
            successMessage.style.display = 'none';
        }, 2000);
        
    } catch (err) {
        showError(errorMessage, err.message);
    }
});

// Login form submission
loginForm.addEventListener('submit', async function(e) {
    e.preventDefault();
    
    // Get input values
    const username = document.getElementById('loginUsername').value.trim();
    const password = document.getElementById('loginPassword').value;
    const errorMessage = document.getElementById('loginErrorMessage');
    const successMessage = document.getElementById('loginSuccessMessage');
    
    // Reset messages
    errorMessage.style.display = 'none';
    successMessage.style.display = 'none';
    
    // Validation
    if (!username || !password) {
        showError(errorMessage, 'Please fill in all fields');
        return;
    }
    
    try {
        const response = await fetch('/api/auth/login', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ username, password })
        });
        
        const data = await response.json();
        
        if (!response.ok) {
            throw new Error(data.msg || 'Login failed');
        }
        
        // Store the token in localStorage
        localStorage.setItem('token', data.token);
        
        // Successful login
        successMessage.textContent = 'Login successful! Redirecting...';
        successMessage.style.display = 'block';
        
        // Redirect to the dashboard
        setTimeout(() => {
            window.location.href = 'website.html';
        }, 1500);
        
    } catch (err) {
        showError(errorMessage, err.message);
    }
});

// Helper function to show error messages
function showError(element, message) {
    element.textContent = message;
    element.style.display = 'block';
}
    </script>
</body>
</html>
